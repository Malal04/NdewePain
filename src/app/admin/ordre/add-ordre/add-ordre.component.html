<main class="detail-commande" *ngIf="commande">

  <!-- Titre -->
  <div class="titre">
    <h1>Détails de la commande</h1>
    <p class="sous-titre">Code : <span class="highlight">#{{ commande.code_commande }}</span></p>
  </div>

  <!-- Carte principale -->
  <div class="card">

    <!-- Infos générales -->
    <div class="order-details">
      <h2>Informations générales</h2>
      <div class="order-row"><strong>Date :</strong> <span>{{ commande.created_at | date:'dd/MM/yyyy HH:mm' }}</span></div>
      <div class="order-row"><strong>Statut :</strong>
        <span class="badge" [ngClass]="commande.statut_commande">
          {{ commande.statut_commande | titlecase }}
        </span>
      </div>
      <div class="order-row"><strong>Mode de livraison :</strong> <span>{{ commande.mode_livraison }}</span></div>
      <div class="order-row"><strong>Adresse de livraison :</strong> <span>{{ commande.adresse || 'Non renseignée' }}</span></div>
    </div>

    <!-- Produits -->
    <div class="order-products">
      <h2>Articles commandés</h2>
      <div class="produit" *ngFor="let article of commande.articles">
        <div class="produit-image">
          <img [src]="article.produit.photo_url || '../../../../assets/painBlog.png'" [alt]="article.produit.nom">
        </div>
        <div class="produit-info">
          <p class="nom">{{ article.produit.nom }}</p>
          <p class="prix">Prix unitaire : {{ article.prix_unitaire }} FCFA</p>
          <p class="quantite">Quantité : {{ article.quantite }}</p>
          <p class="total">Sous-total : {{ article.total }} FCFA</p>
        </div>
      </div>
    </div>

    <!-- Paiement -->
    <div class="order-payment">
      <h2>Paiement</h2>
      <div class="order-row"><strong>Méthode :</strong> <span>{{ commande.paiement?.methode | uppercase }}</span></div>
      <div class="order-row"><strong>Statut :</strong> 
        <span class="badge" [ngClass]="commande.paiement?.statut">
          {{ commande.paiement?.statut | titlecase }}
        </span>
      </div>
      <div class="order-row"><strong>Montant total :</strong> <span class="highlight">{{ commande.total }} FCFA</span></div>
    </div>

    <!-- Résumé -->
    <div class="order-summary">
      <h2>Résumé</h2>
      <div class="order-row"><strong>Sous-total :</strong> <span>{{ commande.sous_total }} FCFA</span></div>
      <div class="order-row"><strong>Remise :</strong> <span>- {{ commande.remise }} FCFA</span></div>
      <div class="order-row"><strong>Frais de livraison :</strong> <span>{{ commande.frais_livraison }} FCFA</span></div>
      <div class="order-row total-final"><strong>Total :</strong> <span>{{ commande.total }} FCFA</span></div>
    </div>

    <!-- Infos client -->
    <div class="order-client">
      <h2>Informations client</h2>
      <div class="client-card">
        <img [src]="commande.user?.profile" alt="Photo client" class="client-photo">
        <div>
          <p class="client-nom">{{ commande.user?.nom }}</p>
          <p class="client-contact">{{ commande.user?.phone }} | {{ commande.user?.email }}</p>
        </div>
      </div>
    </div>

    <!-- Bouton retour -->
    <div class="actions">
      <button class="btn-retour" (click)="mescommande()">← Retour commandes</button>
    </div>
  </div>
</main>