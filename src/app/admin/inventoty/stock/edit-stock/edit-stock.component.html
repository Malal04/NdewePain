<main class="stock-form-container">
  <header class="header">
    <h2><i class="fa fa-edit"></i> Modifier le stock</h2>
    <p>Mettez à jour les niveaux de stock du produit sélectionné.</p>
  </header>

  <!-- Messages -->
  <p class="message success" *ngIf="message && !error">
    <i class="fa fa-check-circle"></i> {{ message }}
  </p>
  <p class="message error" *ngIf="error">
    <i class="fa fa-exclamation-triangle"></i> {{ error }}
  </p>

  <form [formGroup]="stockForm" (ngSubmit)="onSubmit()" novalidate>
    <!-- Produit -->
    <div class="form-group">
      <label for="produit_id">Produit <span class="required">*</span></label>
      <select id="produit_id" formControlName="produit_id">
        <option value="">-- Sélectionner un produit --</option>
        <option *ngFor="let p of produits" [value]="p.id">{{ p.nom }}</option>
      </select>
      <div class="error" *ngIf="stockForm.get('produit_id')?.touched && stockForm.get('produit_id')?.invalid">
        <small>Le produit est obligatoire.</small>
      </div>
    </div>

    <!-- Quantité actuelle -->
    <div class="form-group">
      <label for="quantite_actuelle">Quantité actuelle</label>
      <input type="number" id="quantite_actuelle" formControlName="quantite_actuelle" min="0" />
      <div class="error" *ngIf="stockForm.get('quantite_actuelle')?.touched && stockForm.get('quantite_actuelle')?.invalid">
        <small>La quantité doit être ≥ 0.</small>
      </div>
    </div>

    <!-- Seuil minimum -->
    <div class="form-group">
      <label for="seuil_minimum">Seuil minimum</label>
      <input type="number" id="seuil_minimum" formControlName="seuil_minimum" min="0" />
      <div class="error" *ngIf="stockForm.get('seuil_minimum')?.touched && stockForm.get('seuil_minimum')?.invalid">
        <small>Le seuil doit être ≥ 0.</small>
      </div>
    </div>

    <!-- Actions -->
    <div class="form-actions">
      <button type="submit" class="btn btn-primary" [disabled]="stockForm.invalid">
        <i class="fa fa-save"></i> Enregistrer
      </button>
      <button type="button" class="btn btn-secondary" (click)="cancel()">
        <i class="fa fa-times"></i> Annuler
      </button>
    </div>
  </form>
</main>
