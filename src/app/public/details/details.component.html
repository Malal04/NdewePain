<header class="header-menu">
  <app-header></app-header>
</header>
<div class="details" *ngIf="produit">
  <!-- Fil d’Ariane -->
  <nav class="breadcrumb">
    <a routerLink="/menu"><i class="fa fa-home"></i> Menu</a> /
    <span>{{ produit.nom }}</span>
  </nav>

  <div class="product-container">
    <!-- Image principale -->
    <div class="product-image">
      <img [src]="produit.photo_url || '../../../assets/painBlog.png'" [alt]="produit.nom">
    </div>

    <!-- Détails -->
    <div class="product-details">
      <h1>{{ produit.nom }}</h1>
      <p class="description">{{ produit.description }}</p>

      <!-- Allergènes -->
      <h3 *ngIf="produit.allergenes">Informations Allergènes</h3>
      <div class="allergens" *ngIf="produit.allergenes?.length">
        <span *ngFor="let allergene of produit.allergenes">
          <i class="fa fa-exclamation-circle"></i> Contient {{ allergene }}
        </span>
      </div>

      <!-- Prix + Quantité -->
      <div class="purchase">
        <div class="price">{{ produit.prix_unitaire | number:'1.0-0' }} FCFA</div>
        <div class="quantity">
          <button type="button" (click)="decreaseQty()">-</button>
          <input type="text" [(ngModel)]="quantity" readonly>
          <button type="button" (click)="increaseQty()">+</button>
        </div>
      </div>

      <!-- CTA -->
      <button type="button" class="btn-add" (click)="addToCart()">
        <i class="fa fa-cart-plus"></i> Ajouter au panier
      </button>

      <p class="text-success" *ngIf="message">{{ message }}</p>
      <p class="text-danger" *ngIf="error">{{ error }}</p>
    </div>
  </div>

  <!-- Produits recommandés -->
  <section class="related" *ngIf="related.length">
    <h2><i class="fa fa-star"></i> Vous pourriez aussi aimer</h2>
    <div class="related-grid">
      <div class="card" *ngFor="let r of related">
        <img [src]="r.photo_url || '../../../assets/painBlog.png'" [alt]="r.nom">
        <h4>{{ r.nom }}</h4>
        <p>{{ r.prix_unitaire | number:'1.0-0' }} FCFA</p>
        <div class="actions-card">
          <button type="button" class="btn primary" (click)="addToCart(); $event.stopPropagation()">
            <i class="fa fa-cart-plus"></i> Ajouter
          </button>
          <button type="button" class="btn secondary"  (click)="viewProduitDetails(r.categorie.id);  $event.stopPropagation()">
            <i class="fa fa-eye"></i> Voir
          </button>
        </div>
      </div>
    </div>  
  </section>
</div>
<footer class="footer-menu">
  <app-footer></app-footer>
</footer>