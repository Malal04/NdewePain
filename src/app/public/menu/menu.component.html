<header class="header-menu">
  <app-header></app-header>
</header>

<div class="menu">

  <div class="container-menu">

    <!-- Filtres -->
    <aside class="filters">
      <h2><i class="fa fa-filter"></i> Filtres</h2>

      <!-- Recherche -->
      <div class="search-box">
        <i class="fa fa-search"></i>
        <input type="text" placeholder="Rechercher un produit..."
               [(ngModel)]="searchTerm" (keyup.enter)="searchProduits()">
      </div>

      <!-- Catégories -->
      <div class="filter-group">
        <h3><i class="fa fa-list"></i> Catégorie</h3>
        <div class="tags">
          <span *ngFor="let cat of categories"
                [class.active]="selectedCategory === cat.id"
                (click)="filterByCategory(cat.id)">
            {{ cat.nom }}
          </span>
        </div>
      </div>

      <!-- Régimes -->
      <div class="filter-group">
        <h3><i class="fa fa-leaf"></i> Régimes spéciaux</h3>
        <label><input type="checkbox"> Sans gluten</label>
        <label><input type="checkbox"> Vegan</label>
        <label><input type="checkbox"> Sans lactose</label>
      </div>

      <!-- Boutons -->
      <button class="btn primary" (click)="searchProduits()">
        <i class="fa fa-check-circle"></i> Appliquer
      </button>
      <button class="btn secondary" (click)="resetFilters()">
        <i class="fa fa-undo"></i> Réinitialiser
      </button>
    </aside>

    <!-- Produits -->
    <main class="products">

      <div class="header_menu">
        <h1><i class="fa fa-bread-slice"></i> Nos Produits NdewePain</h1>
        <div class="sort_menu">
          <label for="sort">Trier par :</label>
          <select id="sort" class="sort-select" [(ngModel)]="sortOption" (change)="sortProduits()">
            <option value="popularite">Popularité</option>
            <option value="prix_asc">Prix croissant</option>
            <option value="prix_desc">Prix décroissant</option>
          </select>
        </div>
      </div>

      <!-- Liste produits -->
      <div class="grid_menu">
        <div class="card_menu"
             *ngFor="let produit of produits"
             (click)="viewProduitDetails(produit.id)">
          <img [src]="produit.photo_url || '../../../assets/painBlog.png'" [alt]="produit.nom">
          <h4>{{ produit.nom }}</h4>
          <p>{{ produit.prix_unitaire }} FCFA</p>
          <div class="actions-card">
            <button type="button" class="btn primary" (click)="addProduct(produit.id) ; $event.stopPropagation()">
              <i class="fa fa-cart-plus"></i> Ajouter
            </button>
            <button type="button" class="btn secondary" routerLink="/details/{{produit.id}}" (click)="$event.stopPropagation()">
              <i class="fa fa-info-circle"></i> Détails
            </button>
          </div>
        </div>
      </div>

      <!-- Pagination -->
      <div class="pagination_menu" *ngIf="totalPages > 1">
        <button type="button" (click)="prevPage()" [disabled]="currentPage === 1">
          <i class="fa fa-chevron-left"></i> Précédent
        </button>
        <span>Page {{ currentPage }} / {{ totalPages }}</span>
        <button type="button" (click)="nextPage()" [disabled]="currentPage === totalPages">
          Suivant <i class="fa fa-chevron-right"></i>
        </button>
      </div>

    </main>

  </div>

</div>

<footer class="footer-menu">
  <app-footer></app-footer>
</footer>
